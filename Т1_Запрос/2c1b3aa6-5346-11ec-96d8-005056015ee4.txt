{
 'Реквизиты': {
  'Наименование': 'Отправка статусов проектов Т1К',
  'ТекстОбработки': 'ТЗ = Т1_ВнешниеПодключения.ПолучитьТЗДанныхОчередиКОтправкеПоЗапросу(ЗапросСсылка.Ссылка);  

Если ТЗ.Количество() > 0 Тогда 
	
	//Идентификатор выполнения всего запроса 
	ИндентификаторОбращения = Строка(Новый УникальныйИдентификатор);

	СписокПроектов = "";      
	Разделитель = "---------------------------------------------------";
	StatusRequest = Соединение.ВебСервис.ФабрикаXDTO.Создать(Соединение.ВебСервис.ФабрикаXDTO.Тип(Соединение.ПространствоИмен, "ProjectsStatus")); 
	
    ДатаВремяНачалаПопыткиОтправки = ТекущаяДата();
    
	Для Каждого Стр из ТЗ Цикл     
		Данные = Стр.Данные.Получить();   		
		StatusLine = Соединение.ВебСервис.ФабрикаXDTO.Создать(Соединение.ВебСервис.ФабрикаXDTO.Тип(Соединение.ПространствоИмен, "ProjectStatusLineDecryption"));	
		ЗаполнитьЗначенияСвойств(StatusLine, Данные);
		StatusRequest.ProjectStatusLine.Добавить(StatusLine);
		СписокПроектов = СписокПроектов+Символы.ПС+"Проект: "+Данные.ProjectGuid+". Идентификатор в регистрах: "+Стр.Идентификатор;	 
	КонецЦикла;    
    
 	СтрокаЗапроса = Т1_ОбщегоНазначенияСервер.ПолучитьXDTOКакСтроку(StatusRequest); 
 	 
    ТекстКомментария = ИндентификаторОбращения+Символы.ПС+Разделитель+Символы.ПС+СписокПроектов+Символы.ПС+Разделитель+Символы.ПС+СтрокаЗапроса;
    
    Т1_ВнешниеПодключения.СделатьЗаписьОтправкиВЖурналеРегистрации("ПопыткаОтправкиДанных", УровеньЖурналаРегистрации.Информация, ТекстКомментария); 
    
	StatusResponse = Соединение.ВебСервис.SetProjectsStatus(StatusRequest); 
    
    Если StatusResponse <> Неопределено Тогда  
		СтрокаОтвета = Т1_ОбщегоНазначенияСервер.ПолучитьXDTOКакСтроку(StatusResponse);      
		ТекстКомментария = ИндентификаторОбращения+Символы.ПС+Разделитель+Символы.ПС+СписокПроектов+Символы.ПС+Разделитель+Символы.ПС+СтрокаОтвета;	
  		Если StatusResponse.Success = Истина Тогда
			Т1_ВнешниеПодключения.ОбработатьРезультатОтправкиСообщенийИзОчереди(ТЗ, Истина, ДатаВремяНачалаПопыткиОтправки, ТекстКомментария);  			
		Иначе			
			Т1_ВнешниеПодключения.ОбработатьРезультатОтправкиСообщенийИзОчереди(ТЗ, Ложь, ДатаВремяНачалаПопыткиОтправки, ТекстКомментария);
		КонецЕсли;
	Иначе
		Т1_ВнешниеПодключения.ОбработатьРезультатОтправкиСообщенийИзОчереди(ТЗ, Ложь, ДатаВремяНачалаПопыткиОтправки, "Ответ не получен");		  
	КонецЕсли;   
	
КонецЕсли;',
  'Комментарий': ''
 },
 'ТЧ': [
  {
   'Переменные': []
  }
 ]
}
